#!/bin/bash
# dependencies: pacman -S acpi

BATTERY_INFO=$(acpi -b)
BATTERY_STATE=$(echo "${BATTERY_INFO}" | grep -wo "Full\|Charging\|Discharging")
BATTERY_POWER=$(echo "${BATTERY_INFO}" | grep -o '[0-9]\+%' | tr -d '%')

URGENT_VALUE=10

if [[ "${BATTERY_STATE}" = "Charging" ]]; then
  echo " ${BATTERY_POWER}%"  # short output
  echo " ${BATTERY_POWER}%"  # long output
  echo ""  # color of output
elif [[ "${BATTERY_STATE}" = "Discharging" ]]; then
  if [[ "$BATTERY_POWER" -le 35 ]]; then
    echo "  ${BATTERY_POWER}%"
    echo "  ${BATTERY_POWER}%"
    echo "#f44242"
  elif [[ "$BATTERY_POWER" -le 60 ]]; then
    echo "  ${BATTERY_POWER}%"
    echo "  ${BATTERY_POWER}%"
    echo ""
  elif [[ "$BATTERY_POWER" -le 85 ]]; then
    echo "  ${BATTERY_POWER}%"
    echo "  ${BATTERY_POWER}%"
    echo ""
  else
    echo "  ${BATTERY_POWER}%"
    echo "  ${BATTERY_POWER}%"
    echo ""
  fi
else
  echo " ${BATTERY_POWER}%"
  echo " ${BATTERY_POWER}%"
  echo ""
fi

if [[ "${BATTERY_POWER}" -le "${URGENT_VALUE}" ]]; then
  exit 33
fi
